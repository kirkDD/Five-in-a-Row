<!DOCTYPE html>
<html>
<head>
	<title>Leo's Bot</title>
</head>
<body>
	<button onclick="httpReq()">httpReq</button>
	<button onclick="rootReq()">rootReq</button>
	<button onclick="getBoard()">getBoard</button>
	<button onclick="makeMoveReactWay()">makeMoveReactWay</button>

	<button onclick="GETMakeMove(1)">Move 1</button>
	<button onclick="GETMakeMove(-1)">Move -1</button>

	<button onclick="reset()">reset</button>

	<script type="text/javascript">
		var serverURL = "http://localhost:4567";
		var makeMoveURL = "/makeMove";
		var getBoardURL = "/getGameBoard";
		var resetURL = "/reset";
		function httpReq() {
			var httpReq = new XMLHttpRequest();
			httpReq.open("POST", serverURL + makeMoveURL, true);
			httpReq.setRequestHeader("Content-Type", "application/json");
			var str = JSON.stringify([-1, 1, 1]);
			httpReq.send(str);
			httpReq.onreadystatechange = (e) => {
			  console.log(httpReq.responseText);
			  console.log(e);
			  document.body.append(httpReq.responseText);
			}
		}


		async function rootReq() {
			await fetch(serverURL)
	            .then(response => response.text())
	            .then(data => console.log(data));
		}

		async function getBoard() {
    		var promise = await fetch(serverURL + getBoardURL);
	    	if (!promise.ok) {
	    		console.log(promise);
	    	}
    		var response = await promise.json();
    		console.log(response);
    		return response;
    	}

		makeMoveReactWay = async() => {
        	await fetch(serverURL + makeMoveURL,
            {
                method: "POST",
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify([-1, 1, 1])
			})
            .then(response => response.text())
            .then(data => console.log(data));
        }

        async function GETMakeMove(player) {
        	var uri = encodeURI(serverURL + makeMoveURL + "?x=12&y=12&player=1");
        	console.log(uri);
    		var promise = await fetch(uri);
    		if (!promise.ok) {
	    		console.log(promise);
	    	}
	    	var response = await promise.json();
    		console.log(response);
        }


        async function reset() {
        	var promise = await fetch(serverURL + resetURL);
	    	if (!promise.ok) {
	    		console.log(promise);
	    	}
    		var response = await promise.text();
    		console.log(response);
    		return response;
        }

	</script>
</body>
</html>